# 7ì¥ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ê³¼ ê¸°íƒ€ ê´€ë¡€

7ì¥ì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©

â—¼ï¸ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

â—¼ï¸ ê´€ë¡€ : ì—¬ëŸ¬ ì—°ì‚°ì„ ì§€ì›í•˜ê¸° ìœ„í•´ íŠ¹ë³„í•œ ì´ë¦„ì´ ë¶™ì€ ë©”ì†Œë“œ

â—¼ï¸ ìœ„ì„ í”„ë¡œí¼í‹°

ê´€ë¡€ â†’ ì–´ë–¤ ì–¸ì–´ ê¸°ëŠ¥ê³¼ ë¯¸ë¦¬ ì •í•´ì§„ ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ê¸°ë²•

ìë°”ëŠ” ì–¸ì–´ ê¸°ëŠ¥ì„ íƒ€ì…ì— ì˜ì¡´í•˜ëŠ” ë°˜ë©´ ì½”í‹€ë¦°ì€ (í•¨ìˆ˜ ì´ë¦„ì„ í†µí•œ) ê´€ë¡€ì— ì˜ì¡´í•œë‹¤.

## ì‚°ìˆ  ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

ì½”í‹€ë¦°ì—ì„œ ê´€ë¡€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ë‹¨ìˆœí•œ ì˜ˆëŠ” ì‚°ìˆ  ì—°ì‚°ìì´ë‹¤.

ì´í•­ ì‚°ìˆ  ì—°ì‚° ì˜¤ë²„ë¡œë”©ì˜ ì˜ˆë¥¼ ì‚´í´ë³´ì. ì•„ë˜ ì½”ë“œëŠ” Point ê°ì²´ì˜ X, Y ì¢Œí‘œë¥¼ ê°ê° ë”í•œë‹¤.

```kotlin
data class Point(val x: Int, val y: Int){
    operator fun plus(other: Point) : Point{
        return Point(x+other.x, y+other.y)
    }
}

fun main(args: Array<String>) {
    val p1 = Point(10, 20)
    val p2 = Point(30, 40)
		println(p1 + p2)
}
```

plus í•¨ìˆ˜ ì•ì— operator í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì•¼ í•œë‹¤. ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”©í•˜ëŠ” í•¨ìˆ˜ ì•ì—ëŠ” ê¼­ operatorê°€ ìˆì–´ì•¼ í•œë‹¤. operator ë³€ê²½ìë¥¼ ì¶”ê°€í•´ plus í•¨ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³  ë‚˜ë©´ + ê¸°í˜¸ë¡œ ë‘ Point ê°ì²´ë¥¼ ë”í•  ìˆ˜ ìˆë‹¤.

<img src ="img/plus_assign.png" width="800">

ì—°ì‚°ìë¥¼ ë©¤ë²„í•¨ìˆ˜ë¡œ ë§Œë“œëŠ” ëŒ€ì‹  í™•ì¥í•¨ìˆ˜ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì™¸ë¶€ í•¨ìˆ˜ì˜ í´ë˜ìŠ¤ì— ëŒ€í•œ ì—°ì‚°ìë¥¼ ì •ì˜í•  ë•ŒëŠ” ê´€ë¡€ë¥¼ ë”°ë¥´ëŠ” ì´ë¦„ì˜ í™•ì¥í•¨ìˆ˜ë¡œ êµ¬í˜„í•˜ëŠ”ê²Œ ì¼ë°˜ì ì¸ íŒ¨í„´ì´ë‹¤.

| ì‹ | í•¨ìˆ˜ ì´ë¦„ |
| --- | --- |
| a * b | times |
| a / b | div |
| a % b | mod(1.1 ë¶€í„° rem) |
| a + b | plus |
| a - b | minus |

ì—°ì‚°ìë¥¼ ì •ì˜í•  ë•Œ ë‘ í”¼ì—°ì‚°ì(ì—°ì‚°ì í•¨ìˆ˜ì˜ ë‘ íŒŒë¼ë¯¸í„°)ê°€ ê°™ì€ íƒ€ì…ì¼ í•„ìš”ëŠ” ì—†ë‹¤.

```kotlin
data class Point(val x: Int, val y: Int){
    operator fun plus(other: Point) : Point{
        return Point(x+other.x, y+other.y)
    }
}

operator fun Point.times(scale: Double) : Point{
    return Point((x * scale).toInt(), (y * scale).toInt())
}

fun main(args: Array<String>) {
    val p = Point(10, 20)
		println(p * 1.5)
}
```

```kotlin
operator fun Double.times(p: Point) : Point{
    return Point((this * p.x).toInt(), (this * p.y).toInt())
}
```

> ì½”í‹€ë¦° ì—°ì‚°ìê°€ ìë™ìœ¼ë¡œ êµí™˜ ë²•ì§(a op b == b op a)ì„ ì§€ì›í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. 1.5 * p ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë³„ë„ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.
>

```kotlin
operator fun Char.times(count: Int) : String{
    return toString().repeat(count)
}
```

> ê·¸ë¦¬ê³  ì—°ì‚°ì í•¨ìˆ˜ì˜ ë°˜í™˜ íƒ€ì…ì´ ê¼­ ë‘ í”¼ì—°ì‚¬ì ì¤‘ í•˜ë‚˜ì™€ ì¼ì¹˜í•´ì•¼ë§Œ í•˜ëŠ” ê²ƒë„ ì•„ë‹ˆë‹¤. ì•„ë˜ ì½”ë“œëŠ” ë¬¸ìë¥¼ ì—¬ëŸ¬ë²ˆ ë°˜ë³µí•´ì„œ ë¬¸ìì—´ì„ ë§Œë“¤ì–´ë‚´ëŠ” ì˜ˆì œì´ë‹¤.
>

ì¼ë°˜ í•¨ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ operator í•¨ìˆ˜ë„ ì˜¤ë²„ë¡œë”©í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ì´ë¦„ì€ ê°™ì§€ë§Œ íŒŒë¼ë¯¸í„° íƒ€ì…ì´ ì„œë¡œ ë‹¤ë¥¸ ì—°ì‚°ì í•¨ìˆ˜ë¥¼ ì—¬ëŸ¿ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

<aside>
ğŸ“– ë¹„íŠ¸ ì—°ì‚°ìì— ëŒ€í•´ íŠ¹ë³„í•œ ì—°ì‚°ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. 
ì½”í‹€ë¦°ì€ í‘œì¤€ ìˆ«ì íƒ€ì…ì— ëŒ€í•´ ë¹„íŠ¸ ì—°ì‚°ìë¥¼ ì •ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì»¤ìŠ¤í…€ íƒ€ì…ì—ì„œ ë¹„íŠ¸ ì—°ì‚°ìë¥¼ ì •ì˜í•  ìˆ˜ë„ ì—†ë‹¤. ëŒ€ì‹ ì— ì¤‘ìœ„ ì—°ì‚°ì í‘œê¸°ë²•ì„ ì§€ì›í•˜ëŠ” ì¼ë°˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ë¹„íŠ¸ ì—°ì‚°ì„ ìˆ˜í–‰í•œë‹¤.

> ë‹¤ìŒì€ ì½”í‹€ë¦°ì—ì„œ ë¹„íŠ¸ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ì˜ ëª©ë¡ì´ë‹¤.
>
>
>
> | shl | ì™¼ìª½ ì‹œí”„íŠ¸(ìë°” <<) |
> | --- | --- |
> | shr | ì˜¤ë¥¸ìª½ ì‹œí”„íŠ¸(ë¶€í˜¸ ë¹„íŠ¸ ìœ ì§€, ìë°” >>) |
> | ushr | ì˜¤ë¥¸ìª½ ì‹œí”„íŠ¸(0ìœ¼ë¡œ ë¶€í˜¸ ë¹„íŠ¸ ì„¤ì •, ìë°” >>>) |
> | and | ë¹„íŠ¸ ê³±(ìë°” &) |
> | or | ë¹„íŠ¸ í•©(ìë°” |) |
> | xor | ë¹„íŠ¸ ë°°íƒ€ í•©(ìë°” ^) |
> | inv | ë¹„íŠ¸ ë°˜ì „(ìë°” ~) |
</aside>

## ë³µí•© ëŒ€ì… ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

plusì™€ ê°™ì€ ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”©í•˜ë©´ ì½”í‹€ë¦°ì€ + ì—°ì‚°ìë¿ ì•„ë‹ˆë¼ ê·¸ì™€ ê´€ë ¨ ìˆëŠ” ì—°ì‚°ìì¸ +=ë„ ìë™ìœ¼ë¡œ í•¨ê»˜ ì§€ì›í•œë‹¤. +=, -= ë“±ì˜ ì—°ì‚°ìëŠ” ë³µí•© ëŒ€ì… ì—°ì‚°ìë¼ ë¶ˆë¦°ë‹¤.

```kotlin
var point = Point(1, 2)
point += Point(3, 4)
println(point)
```

ê²½ìš°ì— ë”°ë¼ += ì—°ì‚°ì´ ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ë‹¤ë¥¸ ì°¸ì¡°ë¡œ ë°”ê¾¸ê¸°ë³´ë‹¤ ì›ë˜ ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ê²Œ ë§Œë“¤ë ¤ë©´, ë³€ê²½ ê°€ëŠ¥í•œ ì»¬ë ‰ì…˜ì— ì›ì†Œë¥¼ ì¶”ê°€í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.

```kotlin
val numbers = ArrayList<Int>()
numbers += 42
println(numbers[0])

/*
@kotlin.internal.InlineOnly
public inline operator fun <T> MutableCollection<in T>.plusAssign(element: T) {
    this.add(element)
}
*/

val list = arrayListOf(1, 2)
list += 3
val newList = list + listOf(4, 5)
println(list)
println(newList)
```

## ë‹¨í•­ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

ë‹¨í•­ ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”©í•˜ëŠ” ì ˆì°¨ë„ ì´í•­ ì—°ì‚°ìì™€ ë§ˆì°¬ê°€ì§€ì´ë‹¤. ë¯¸ë¦¬ ì •í•´ì§„ ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ì„ ì–¸í•˜ë©´ì„œ operatorë¡œ í‘œì‹œí•˜ë©´ ëœë‹¤. ë‹¨í•­ ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”©í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ëŠ” ì¸ìë¥¼ ì·¨í•˜ì§€ ì•ŠëŠ”ë‹¤.

> í‘œ. ì˜¤ë²„ë¡œë”©í•  ìˆ˜ ìˆëŠ” ë‹¨í•­ ì‚°ìˆ  ì—°ì‚°ì
>

| ì‹ | í•¨ìˆ˜ì´ë¦„ |
| --- | --- |
| +a | unaryPlus |
| -a | unaryMinus |
| !a | not |
| ++a, a++ | inc |
| â€”a, aâ€” | dec |

## ë¹„êµ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

- ë™ë“±ì„± ì—°ì‚°ì : equals
- ìˆœì„œ ì—°ì‚°ì : compareTo

### ë™ë“±ì„± ì—°ì‚°ì : equals

<img src ="img/equals_sp.png" width="800">

```kotlin
class Point(val x: Int, val y: Int){
    override fun equals(obj: Any?): Boolean {
        if(obj == this) return true
        if(obj !is Point) return false
        return obj.x == x && obj.y == y
    }
}

fun main(args: Array<String>) {
		println(Point(10, 20) == Point(10, 20))
		println(Point(10, 20) != Point(5, 5))
		println(null == Point(1, 2))
}
```

### ìˆœì„œì—°ì‚°ì : compareTo

<img src ="img/compareTo.png" width="800">

```kotlin
class Person(
    val firstName: String, val lastName: String
) : Comparable<Person>{
    override fun compareTo(other: Person): Int {
        returncompareValuesBy(this, other,
        Person::lastName, Person::firstName)
    }
}

fun main(args: Array<String>) {
    val p1 = Person("Alice", "Smith")
    val p2 = Person("Bob", "Johnson")
		println(p1 < p2)
}
```

## ì»¬ë ‰ì…˜ê³¼ ë²”ìœ„ì— ëŒ€í•´ ì“¸ ìˆ˜ ìˆëŠ” ê´€ë¡€

ì»¬ë ‰ì…˜ì„ ë‹¤ë£° ë•Œ ë§ì´ ì“°ì´ëŠ” ì—°ì‚°ì

- ì¸ë±ìŠ¤ ì—°ì‚°ì â†’ a[b]
- in ì—°ì‚°ì â†’ ì›ì†Œê°€ ì»¬ë ‰ì…˜ì´ë‚˜ ë²”ìœ„ì— ì†í•˜ëŠ”ì§€ ê²€ì‚¬ í˜¹ì€ ì»¬ë ‰ì…˜ì— ìˆëŠ” ì›ì†Œë¥¼ ì´í„°ë ˆì´ì…˜ í• ë•Œ

### ì¸ë±ìŠ¤ë¡œ ì›ì†Œì— ì ‘ê·¼ : getê³¼ set

ì½”í‹€ë¦°ì—ì„œëŠ” ì¸ë±ìŠ¤ ì—°ì‚°ìë„ ê´€ë¡€ë¥¼ ë”°ë¥¸ë‹¤. ì›ì†Œë¥¼ ì½ëŠ” ì—°ì‚°ì€ get ì—°ì‚°ì ë©”ì†Œë“œë¡œ ë³€í™˜ë˜ê³ , ì›ì†Œë¥¼ ì“°ëŠ” ì—°ì‚°ì€ set ì—°ì‚°ì ë©”ì†Œë“œë¡œ ë³€í™˜ëœë‹¤.

```kotlin
data class Point(val x: Int, val y: Int)
data class MutablePoint(var x: Int, var y: Int)

operator fun Point.get(index: Int) : Int{
    return when(index){
        0 -> x
        1 -> y
        else ->
            throw IndexOutOfBoundsException("Invalid coordinate $index")
    }
}

operator fun MutablePoint.set(index: Int, value: Int){
    when(index){
        0 -> x = value
        1 -> y = value
        else ->
            throw IndexOutOfBoundsException("Invalid coordinate $index")
    }
}

fun main(args: Array<String>) {
    val p = Point(10, 20)
    val q = MutablePoint(10, 20)
		println(p[1])
    q[1] = 42
		println(q)
}
```

<img src ="img/set.png" width="800">

### in ê´€ë¡€

```kotlin
data class Rectangle(val upperLeft: Point, val lowerRight: Point)

operator fun Rectangle.contains(p: Point) : Boolean{
    return p.x in upperLeft.xuntillowerRight.x &&
            p.y in upperLeft.yuntillowerRight.y
}

fun main(args: Array<String>) {
    val rect = Rectangle(Point(10, 20), Point(50, 50))
		println(Point(20, 30) in rect)
		println(Point(5, 5) in rect)
}
```

### for ë£¨í”„ë¥¼ ìœ„í•œ iterator ê´€ë¡€

```kotlin
operator fun ClosedRange<LocalDate>.iterator(): Iterator<LocalDate> =
    object : Iterator<LocalDate>{
        var current = start
        override fun hasNext() = current <= endInclusive

        override fun next(): LocalDate = current.apply{
					current = plusDays(1)
					}
}

fun main(args: Array<String>) {
    val newYear = LocalDate.ofYearDay(2022, 8)
		//Comparable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ì— ëŒ€í•´ì„œëŠ” rangeToë¥¼ ì •ì˜í•  í•„ìš”ê°€ ì—†ë‹¤.
    val daysOff = newYear.minusDays(5)..newYear
    for (dayOff in daysOff) {println(dayOff)}
}
```

## êµ¬ì¡° ë¶„í•´ ì„ ì–¸ê³¼ component í•¨ìˆ˜

êµ¬ì¡° ë¶„í•´ë¥¼ ì‚¬ìš©í•˜ë©´ ë³µí•©ì ì¸ ê°’ì„ ë¶„í•´í•´ì„œ ì—¬ëŸ¬ ë‹¤ë¥¸ ë³€ìˆ˜ë¥¼ í•œêº¼ë²ˆì— ì´ˆê¸°í™”í•  ìˆ˜ ìˆë‹¤. êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì€ = ì˜ ì¢Œë³€ì— ì—¬ëŸ¬ ë³€ìˆ˜ë¥¼ ê´„í˜¸ë¡œ ë¬¶ëŠ”ë‹¤.

> ë‚´ë¶€ì—ì„œ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì€ ë‹¤ì‹œ ê´€ë¡€ë¥¼ ì‚¬ìš©í•œë‹¤. êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì˜ ê° ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ componentNì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.(ì—¬ê¸°ì„œ Nì€ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì— ìˆëŠ” ë³€ìˆ˜ ìœ„ì¹˜ì— ë”°ë¼ ë¶™ëŠ” ë²ˆí˜¸ë‹¤)
>

<img src ="img/componentN_sp.png" width="800">

```kotlin
data class Point(var x: Int, var y:Int)

/*class Point(var x: Int, var y:Int) {
    operator fun component1() = x
    operator fun component2() = y
}*/

fun main(args: Array<String>){
    val p = Point(10, 20)
    val (x, y) = p
		println(x)
		println(y)
}
```

```kotlin
data class NameComponents(val name: String, val extension: String)

fun splitFilename(fullName: String) : NameComponents{
    val (name, extension) = fullName.split('.', limit = 2)
		//spilití•¨ìˆ˜ëŠ” 2ê°œì˜ ì›ì†Œë¥´ ì´ë¤„ì§„ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.
    return NameComponents(name, extension)
}
/*fun splitFilename(fullName: String) : NameComponents{
    val result = fullName.split('.', limit = 2)
    return NameComponents(result[0], result[1])
}*/

fun main(args: Array<String>){
    val (name, ext) =splitFilename("example.kt")
		println(name)
		println(ext)
}
```

```kotlin
fun printEntries(map: Map<String, String>){
    for((key, value) in map){
			println("$key -> $value")
    }
}

/*
fun printEntries(map: Map<String, String>){
    for(entry in map.entries){
        val key = entry.component1()
        val value = entry.component2()
        println("$key -> $value")
    }
}
*/

fun main(args: Array<String>){
    val map =mapOf("Oracle"to"Java", "JetBrains"to"Kotlin")
		printEntries(map)
}
```

## í”„ë¡œí¼í‹° ì ‘ê·¼ì ë¡œì§ ì¬í™œìš© : ìœ„ì„ í”„ë¡œí¼í‹°

ìœ„ì„í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ë©´ ë°±í‚¹í•„ë“œì— ë‹¨ìˆœíˆ ì €ì¥í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ë³µì¡í•œ ë°©ì‹ìœ¼ë¡œ ì‘ë™í•˜ëŠ” í”„ë¡œí¼í‹°ë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ê·¸ ê³¼ì •ì—ì„œ ì ‘ê·¼ì ë¡œì§ì„ ë§¤ë²ˆ ì¬êµ¬í˜„í•  í•„ìš”ë„ ì—†ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í”„ë¡œí¼í‹°ëŠ” ìœ„ì„ì„ ì‚¬ìš©í•´ ìì‹ ì˜ ê°’ì„ í•„ë“œê°€ ì•„ë‹ˆë¼ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ë‚˜ ë¸Œë¼ìš°ì € ì„¸ì…˜, ë§µ ë“±ì— ì €ì¥í•  ìˆ˜ ìˆë‹¤.

> ì´ëŸ° íŠ¹ì„±ì˜ ê¸°ë°˜ì—ëŠ” ìœ„ì„ì´ ìˆë‹¤. ìœ„ì„ì€ ê°ì²´ê°€ ì§ì ‘ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ë„ìš°ë¯¸ ê°ì²´ê°€ ê·¸ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê²Œ ë§¡ê¸°ëŠ” ë””ìì¸ íŒ¨í„´ì„ ë§í•œë‹¤. ì´ë•Œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ë„ìš°ë¯¸ ê°ì²´ë¥¼ ìœ„ì„ ê°ì²´(delegate)ë¼ê³  ë¶€ë¥¸ë‹¤.(4.3.3ì ˆ ì°¸ì¡°, í´ë˜ìŠ¤ ìœ„ì„)
>

```kotlin
class Foo {
    var p : Type by Delegate()
}

class Foo {

}

```

> í”„ë¡œí¼í‹° ìœ„ì„ ê´€ë¡€ë¥¼ ë”°ë¥´ëŠ” Delegate í´ë˜ìŠ¤ëŠ” getValueì™€ setValue ë©”ì†Œë“œë¥¼ ì œê³µí•´ì•¼ í•œë‹¤.
>

## ìœ„ì„ í”„ë¡œí¼í‹° ì‚¬ìš© : by lazy()ë¥¼ ì‚¬ìš©í•œ í”„ë¡œí¼í‹° ì´ˆê¸°í™” ì§€ì—°

ì§€ì—° ì´ˆê¸°í™”(lazy initialization)ëŠ” ê°ì²´ì˜ ì¼ë¶€ë¶„ì„ ì´ˆê¸°í™”í•˜ì§€ ì•Šê³  ë‚¨ê²¨ë’€ë‹¤ê°€ ì‹¤ì œë¡œ ê·¸ ë¶€ë¶„ì˜ ê°’ì´ í•„ìš”í•  ê²½ìš° ì´ˆê¸°í™”í• ë•Œ í”íˆ ì“°ì´ëŠ” íŒ¨í„´ì´ë‹¤. **ì´ˆê¸°í™” ê³¼ì •ì— ìì›ì„ ë§ì´ ì‚¬ìš©í•˜ê±°ë‚˜ ê°ì²´ë¥¼ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ê¼­ ì´ˆê¸°í™”í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” í”„ë¡œí¼í‹°ì— ëŒ€í•´ ì§€ì—° ì´ˆê¸°í™” íŒ¨í„´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**

> lazy í•¨ìˆ˜ëŠ” ì½”í‹€ë¦° ê´€ë¡€ì— ë§ëŠ” ì‹œê·¸ë‹ˆì²˜ì˜ getValue ë©”ì†Œë“œê°€ ë“¤ì–´ìˆëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. ë”°ë¼ì„œ lazyë¥¼ by í‚¤ì›Œë“œì™€ í•¨ê»˜ ì‚¬ìš©í•´ ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. lazy í•¨ìˆ˜ì˜ ì¸ìëŠ” ê°’ì„ ì´ˆê¸°í™”í•  ë•Œ í˜¸ì¶œí•  ëŒë‹¤ë‹¤.
>

```kotlin
class Email{}

fun loadEmails(person: Person) : List<Email>{
		println("${person.name}ì˜ ì´ë©”ì¼ì„ ê°€ì ¸ì˜´")
    returnlistOf()
}

class Person(val name: String){
    private var _emails: List<Email>? = null
    val emails: List<Email>
    get(){
        if(_emails == null){
            _emails =loadEmails(this)
        }
        return _emails!!
    }
}

fun main(args: Array<String>) {
    val p = Person("Alice")
    p.emails
    p.emails
}
```

ìœ„ ì½”ë“œëŠ” ë°±í‚¹ í”„ë¡œí¼í‹°ë¼ëŠ” ê¸°ë²•ì„ ì‚¬ìš©í•œë‹¤. _emailsë¼ëŠ” í”„ë¡œí¼í‹°ëŠ” ê°’ì„ ì €ì¥í•˜ê³ , ë‹¤ë¥¸ í”„ë¡œí¼í‹°ì¸ emailsëŠ” _emailsë¼ëŠ” í”„ë¡œí¼í‹°ì— ëŒ€í•œ ì½ê¸° ì—°ì‚°ì„ ì œê³µí•œë‹¤. ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ ì½”ë“œê°€ í›¨ì”¬ ê°„ë‹¨í•´ì§„ë‹¤. **ìœ„ì„ í”„ë¡œí¼í‹°ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•  ë•Œ ì“°ì´ëŠ” ë°±í‚¹ í”„ë¡œí¼í‹°ì™€ ê°’ì´ ì˜¤ì§ í•œë²ˆë§Œ ì´ˆê¸°í™”ë¨ì„ ë³´ì¥í•˜ëŠ”  ê²Œí„° ë¡œì§ì„ í•¨ê»˜ ìº¡ìŠí™”í•´ì¤€ë‹¤.**

```kotlin
class Person(val name: String){
    val emails by lazy { loadEmails(this) }
}
```

```kotlin
open class PropertyChangeAware{
    protected val changeSupoort = PropertyChangeSupport(this)

    fun addPropertyChangeListener(listener: PropertyChangeListener){
        changeSupoort.addPropertyChangeListener(listener)
    }
    fun removePropertyChangeListener(listener: PropertyChangeListener){
        changeSupoort.removePropertyChangeListener(listener)
    }
}

class Person(
    val name: String, age: Int, salary: Int
) : PropertyChangeAware(){
    var age: Int = age
    set(newValue) {
        val oldValue =field
        field= newValue
        changeSupoort.firePropertyChange(
            "age", oldValue, newValue
        )
    }
    var salary: Int =  salary
    set(newValue){
        val oldValue =field
        field= newValue
        changeSupoort.firePropertyChange(
            "salary", oldValue, newValue
        )
    }
}

fun main(args: Array<String>) {
    val p = Person("Dmitry", 34, 2000)
    p.addPropertyChangeListener(
			PropertyChangeListener{
			event->println("Property ${event.propertyName} changed "+
			        "from ${event.oldValue} to ${event.newValue}")
			}
	)
    p.age = 35
    p.salary = 2100
}
```

```kotlin
class ObservableProperty(
    var propValue: Int,
    val changeSupport: PropertyChangeSupport
){
    operator fun getValue(p: Person, prop: KProperty<*>): Int = propValue)
    operator fun setValue(p: Person, prop: KProperty<*>, newValue: Int){
        val oldValue = propValue
        propValue = newValue
        changeSupport.firePropertyChange(prop.name, oldValue, newValue)
    }
}

/*
class ObservableProperty(
    val propName: String, var propValue: Int,
    val changeSupport: PropertyChangeSupport
){
    fun getValue(): Int = propValue
    fun setValue(newValue: Int){
       val oldValue = propValue
       propValue = newValue
       changeSupport.firePropertyChange(propName, oldValue, newValue)
    }
}
*/

open class PropertyChangeAware{
    protected val changeSupoort = PropertyChangeSupport(this)

    fun addPropertyChangeListener(listener: PropertyChangeListener){
        changeSupoort.addPropertyChangeListener(listener)
    }
    fun removePropertyChangeListener(listener: PropertyChangeListener){
        changeSupoort.removePropertyChangeListener(listener)
    }
}

class Person(
    val name: String, age: Int, salary: Int
) : PropertyChangeAware(){
    val _age = ObservableProperty("age", age, changeSupoort)
    var age: Int
    get() = _age.getValue()
    set(value) {_age.setValue(value)}
    val _salary = ObservableProperty("salary", salary, changeSupoort)
    var salary: Int
    get() = _salary.getValue()
    set(value) {_salary.setValue(value)}
}
```

ì´ ì½”ë“œëŠ” ì½”í‹€ë¦°ì˜ ìœ„ì„ì´ ì‹¤ì œë¡œ ì‘ë™í•˜ëŠ” ë°©ì‹ê³¼ ë¹„ìŠ·í•˜ë‹¤. í”„ë¡œí¼í‹° ê°’ì„ ì €ì¥í•˜ê³  ê·¸ ê°’ì´ ë°”ë€Œë©´ ìë™ìœ¼ë¡œ ë³€ê²½ í†µì§€ë¥¼ ì „ë‹¬í•´ì£¼ëŠ” í´ë˜ìŠ¤ì´ë‹¤.

```kotlin
class Person(
    val name: String, age: Int, salary: Int
) : PropertyChangeAware(){
    var age: Int by ObservableProperty(age, changeSupoort)
    var salary: Int by ObservableProperty(salary, changeSupoort)
}

```

by í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ìœ„ì„ ê°ì²´ë¥¼ ì§€ì •í•˜ë©´ ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬ ì½”ë“œë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. by ì˜¤ë¥¸ìª½ì— ì˜¤ëŠ” ê°ì²´ë¥¼ ìœ„ì„ ê°ì²´(delegate)ë¼ê³  ë¶€ë¥¸ë‹¤. ì½”í‹€ë¦°ì€ ìœ„ì„ ê°ì²´ë¥¼ ê°ì¶°ì§„ í”„ë¡œí¼í‹°ì— ì €ì¥í•˜ê³ , ì£¼ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë¥¼ ì½ê±°ë‚˜ ì“¸ ë•Œë§ˆë‹¤ ìœ„ì„ ê°ì²´ì˜ getValueì™€ setValueë¥¼ í˜¸ì¶œí•œë‹¤.

> ê´€ì°° ê°€ëŠ¥í•œ í”„ë¡œí¼í‹° ë¡œì§ì„ ì§ì ‘ ì‘ì„±í•˜ëŠ” ëŒ€ì‹  ì½”í‹€ë¦° í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤. í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ì´ë¯¸ ObservablePropertyì™€ ë¹„ìŠ·í•œ í´ë˜ìŠ¤ê°€ ìˆë‹¤. ë‹¤ë§Œ ì´ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í´ë˜ìŠ¤ëŠ” PropertyChangeSupportì™€ ì—°ê²°ë¼ ìˆì§€ ì•Šë‹¤. ë”°ë¼ì„œ í”„ë¡œí¼í‹° ê°’ì˜ ë³€ê²½ì„ í†µì§€í•  ë•Œ PropertyChangeSupportë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ì£¼ëŠ” ëŒë‹¤ë¥¼ ê·¸ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í´ë˜ìŠ¤ì—ê²Œ ë„˜ê²¨ì•¼ í•œë‹¤. ì•„ë˜ ì½”ë“œë¥¼ ì‚´í´ë³¸ë‹¤.
>

```kotlin
class Person(
    val name: String, age: Int, salary: Int
) : PropertyChangeAware(){
    private val observer ={
prop: KProperty<*>, oldValue: Int, newValue: Int->
changeSupoort.firePropertyChange(prop.name, oldValue, newValue)
}
var age: Int by Delegates.observable(age, observer)
    var salary: Int by Delegates.observable(salary, observer)
}
```

> byì˜ ì˜¤ë¥¸ìª½ì— ìˆëŠ” ì‹ì´ ê¼­ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤í•„ìš”ëŠ” ì—†ë‹¤. í•¨ìˆ˜ í˜¸ì¶œ, ë‹¤ë¥¸ í”„ë¡œí¼í‹°, ë‹¤ë¥¸ ì‹ ë“±ì´ byì˜ ìš°í•­ì— ì˜¬ ìˆ˜ ìˆë‹¤. ë‹¤ë§Œ ìš°í•­ì— ìˆëŠ” ì‹ì„ ê³„ì‚°í•œ ê²°ê³¼ì¸ ê°ì²´ëŠ” ì»´íŒŒì¼ëŸ¬ê°€ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì˜¬ë°”ë¥¸ íƒ€ì…ì˜ getValueì™€ setValueë¥¼ ë°˜ë“œì‹œ ì œê³µí•´ì•¼í•œë‹¤.
>

## ìœ„ì„ í”„ë¡œí¼í‹° ì»´íŒŒì¼ ê·œì¹™

ìœ„ì„ í”„ë¡œí¼í‹°ê°€ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ ì‚´í´ë³´ì. ë‹¤ìŒê³¼ ê°™ì€ ìœ„ì„ í”„ë¡œí¼í‹°ê°€ ìˆëŠ” í´ë˜ìŠ¤ê°€ ìˆë‹¤ê³  ê°€ì •í•œë‹¤.

```kotlin
class C {
    var prop: Type by MyDelegate()
}

val c = C()
```

ì»´íŒŒì¼ëŸ¬ëŠ” MyDelegate í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°ì¶°ì§„ í”„ë¡œí¼í‹°ì— ì €ì¥í•˜ë©° ê·¸ ê°ì¶°ì§„ í”„ë¡œí¼í‹°ë¥¼ <delegate>ë¼ê³  ë¶€ë¥¸ë‹¤. ë˜í•œ ì»´íŒŒì¼ëŸ¬ëŠ” í”„ë¡œí¼í‹°ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ KProperty íƒ€ì…ì˜ ê°ì²´ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ê°ì²´ë¥¼ <property>ë¼ê³  ë¶€ë¥¸ë‹¤. ë”°ë¼ì„œ ì»´íŒŒì¼ëŸ¬ëŠ” ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ìƒì„±í•œë‹¤.

```kotlin
class C{
    private val <delegate> = MyDelegate()
    var prop: Type
    get() = <delegate>.getValue(this, <property>)
    set(value: Type) = <delegate>.setValue(this, <property>, value)
}
```

<img src ="img/overloading_7.png" width="800">
## í”„ë¡œí¼í‹° ê°’ì„ ë§µì— ì €ì¥

ìì‹ ì˜ í”„ë¡œí¼í‹°ë¥¼ ë™ì ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆëŠ” ê°ì²´ë¥¼ ë§Œë“¤ ë•Œ ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ í™œìš©í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. **ê·¸ëŸ° ê°ì²´ë¥¼ í™•ì¥ ê°€ëŠ¥í•œ ê°ì²´(expando object)ë¼ê³  ë¶€ë¥¸ë‹¤.**

```kotlin
class Person{
    private val _attribute =hashMapOf<String, String>()
    fun setAttribute(attrName: String, value: String){
        _attribute[attrName] = value
    }
    val name: String
    get() = _attribute["name"]!!
}

fun main(args: Array<String>) {
    val p = Person()
    val data =mapOf("name"to"Dmitry", "company"to"JetBrains")
    for((attrName, value) in data)
        p.setAttribute(attrName, value)
		println(p.name)
}
```

```kotlin
class Person{
    private val _attribute =hashMapOf<String, String>()
    fun setAttribute(attrName: String, value: String){
        _attribute[attrName] = value
    }
    val name: String by _attribute
}

//p.name ëŠ” _attributes.getValue(p, prop) ë¼ëŠ” í˜¸ì¶œì„ ëŒ€ì‹ í•œë‹¤.
//_attributes.getValue(p, prop) ëŠ” _attributes[prop.name]ë¥¼ í†µí•´ êµ¬í˜„ëœë‹¤.
```

## ìš”ì•½

- ì½”í‹€ë¦°ì—ì„œëŠ” ì •í•´ì§„ ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¡œë”©í•¨ìœ¼ë¡œì¨ í‘œìˆœ ìˆ˜í•™ ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì§ì ‘ ìƒˆë¡œìš´ ì—°ì‚°ìë¥¼ ë§Œë“¤ ìˆ˜ëŠ” ì—†ë‹¤.
- ë¹„êµì—°ì‚°ìëŠ” equalsì™€ compateTo ë©”ì†Œë“œë¡œ ë³€í™˜ëœë‹¤.
- í´ë˜ìŠ¤ì— get, set, containsë¼ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ë©´ ê·¸ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•´ []ì™€ in ì—°ì‚°ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ê·¸ ê°ì²´ë¥¼ ì»¬ë ‰ì…˜ ê°ì²´ì™€ ë¹„ìŠ·í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆë‹¤.
- ë¯¸ë¦¬ ì •í•´ì§„ ê´€ë¡€ë¥¼ ë”°ë¼ rangeTo, iterator í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ë©´ ë²”ìœ„ë¥¼ ë§Œë“¤ê±°ë‚˜ ì»¬ë ‰ì…˜ê³¼ ë°°ì—´ì˜ ì›ì†Œë¥¼ ì´í„°ë ˆì´ì…˜í•  ìˆ˜ ìˆë‹¤.
- êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì„ í†µí•´ í•œ ê°ì²´ì˜ ìƒíƒœë¥¼ ë¶„í•´í•´ì„œ ì—¬ëŸ¬ ë³€ìˆ˜ì— ëŒ€ì…í•  ìˆ˜ ìˆë‹¤. í•¨ìˆ˜ê°€ ì—¬ëŸ¬ ê°’ì„ í•œêº¼ë²ˆì— ë°˜í™˜í•´ì•¼ í•˜ëŠ” ê²½ìš° êµ¬ì¡° ë¶„í•´ê°€ ìœ ìš©í•˜ë‹¤. ë°ì´í„° í´ë˜ìŠ¤ì— ëŒ€í•œ êµ¬ì¡° ë¶„í•´ëŠ” ê±°ì € ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ êµ¬ì¡° ë¶„í•´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ componentN í•¨ìˆ˜ë¥¼ ì •ì˜í•´ì•¼í•œë‹¤.
- **ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ í†µí•´ í”„ë¡œí¼í‹° ê°’ì„ ì €ì¥í•˜ê±°ë‚˜ ì´ˆê¸°í™”í•˜ê±°ë‚˜ ì½ê±°ë‚˜ ë³€ê²½í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë¡œì§ì„ ì¬í™œìš©í•  ìˆ˜ ìˆë‹¤. ìœ„ì„ í”„ë¡œí¼í‹°ëŠ” í”„ë ˆì„ì›Œí¬ë¥¼ ë§Œë“¤ ë•Œ ì•„ì£¼ ìœ ìš©í•˜ë‹¤.**
- í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ì¸ lazyë¥¼ í†µí•´ ì§€ì—° ì´ˆê¸°í™” í”„ë¡œí¼í‹°ë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
- Delegates.observable í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œí¼í‹° ë³€ê²½ì„ ê´€ì°°í•  ìˆ˜ ìˆëŠ” ê´€ì°°ìë¥¼ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
- ë§µì„ ìœ„ì„ ê°ì²´ë¡œ ì‚¬ìš©í•˜ëŠ” ìœ„ì„ í”„ë¡œí¼í‹°ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ì†ì„±ì„ ì œê³µí•˜ëŠ” ê°ì²´ë¥¼ ìœ ì—°í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆë‹¤.
