# Overview

---

- μ½”ν‹€λ¦°μ—μ„ μ λ„¤λ¦­ ν΄λμ¤μ™€ ν•¨μλ¥Ό μ„ μ–Έν•κ³  μ‚¬μ©ν•λ” κ°λ…μ€ μλ°”μ™€ λΉ„μ·ν•λ‹¤.
- μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°(reified type parameter)λ‚ μ„ μ–Έ μ§€μ  λ³€μ„±(declaration-site variance)λ¥Ό μ„¤λ…ν•λ‹¤.
- μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„° μ‚¬μ©ν•λ©΄ μΈλΌμΈ ν•¨μ νΈμ¶μ—μ„ νƒ€μ… μΈμλ΅ μ“°μΈ κµ¬μ²΄μ μΈ νƒ€μ…μ„ μ‹¤ν–‰ μ‹μ μ— μ• μ μλ‹¤.
    - μΌλ° ν΄λμ¤λ‚ ν•¨μμ κ²½μ° νƒ€μ… μΈμ μ •λ³΄κ°€ μ‹¤ν–‰ μ‹μ μ—μ„ μ‚¬λΌμ§€κΈ° λ•λ¬Έμ— μ΄λ° μΌμ΄ λ¶κ°€λ¥ν•λ‹¤.
- μ„ μ–Έ μ§€μ  λ³€μ„±μ„ μ‚¬μ©ν•λ©΄ κΈ°μ € νƒ€μ…μ€ κ°™μ§€λ§ νƒ€μ… μΈμκ°€ λ‹¤λ¥Έ λ‘ μ λ„¤λ¦­ νƒ€μ… `Type<A>`μ™€ `Type<B>`κ°€ μμ„ λ• νƒ€μ… μΈμ Aμ™€ Bμ μƒμ„/ν•μ„ νƒ€μ… κ΄€κ³„μ— λ”°λΌ λ‘ μ λ„¤λ¦­ νƒ€μ…μ μƒμ„/ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ–΄λ–»κ² λλ”μ§€ μ§€μ •ν•  μ μλ‹¤.
    - `List<Any>`λ¥Ό μΈμλ΅ λ°›λ” ν•¨μμ—κ² `List<Int>` νƒ€μ…μ κ°’μ„ μ „λ‹¬ν•  μ μλ”μ§€ μ—¬λ¶€λ¥Ό μ§€μ •
- μ‚¬μ© μ§€μ  λ³€μ„±(user-site variance)μ€ κ°™μ€ λ©ν‘(μ λ„¤λ¦­ νƒ€μ… κ°’ μ‚¬μ΄μ μƒμ„/ν•μ„ νƒ€μ… κ΄€κ³„ μ§€μ •)λ¥Ό μ λ„¤λ¦­ νƒ€μ… κ°’μ„ μ‚¬μ©ν•λ” μ„μΉμ—μ„ νλΌλ―Έν„° νƒ€μ…μ— λ€ν• μ μ•½μ„ ν‘μ‹ν•λ” λ°©μ‹μΌλ΅ λ‹¬μ„±
- μλ°” μ™€μΌλ“μΉ΄λ“λ” μ‚¬μ© μ§€μ  λ³€μ„±μ— μ†ν•λ©΄ μ½”ν‹€λ¦° μ„ μ–Έ μ§€μ  λ³€μ„±κ³Ό κ°™μ€ μ—­ν• μ„ ν•λ‹¤.

# 1. μ λ„¤λ¦­ νƒ€μ… νλΌλ―Έν„°

---

- μ λ„¤λ¦­μ¤λ¥Ό μ‚¬μ©ν•λ©΄ νƒ€μ… νλΌλ―Έν„°(type parameter)λ¥Ό λ°›λ” νƒ€μ…μ„ μ •μν•  μ μλ‹¤.
- μ λ„¤λ¦­ νƒ€μ…μ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤λ ¤λ©΄ νƒ€μ… νλΌλ―Έν„°λ¥Ό κµ¬μ²΄μ μΈ νƒ€μ… μΈμ(type argument)λ΅ μΉν™ν•΄μ•Ό ν•λ‹¤.
- μ½”ν‹€λ¦° μ»΄νμΌλ¬λ” λ³΄ν†µ νƒ€μ…κ³Ό λ§μ°¬κ°€μ§€λ΅ νƒ€μ… μΈμλ΅ μ¶”λ΅ ν•  μ μλ‹¤.
    
    ```kotlin
    val authors = listOf("Dmirty", "Svetlana")
    ```
    
    - λΉ λ¦¬μ¤νΈλ¥Ό λ§λ“¤ λ• λ³€μμ νƒ€μ…μ„ μ§€μ •ν•΄λ„ λκ³  λ³€μλ¥Ό λ§λ“λ” ν•¨μμ νƒ€μ… μΈμλ¥Ό μ•μ§€μ •ν•΄λ„ λλ‹¤.

<aside>
π’΅ μλ°”μ™€ λ‹¬λ¦¬ μ½”ν‹€λ¦°μ—μ„λ” μ λ„¤λ¦­ νƒ€μ…μ μΈμλ¥Ό ν”„λ΅κ·Έλλ¨Έκ°€ λ…μ‹ν•κ±°λ‚ μ»΄νμΌλ¬κ°€ μ¶”λ΅ ν•  μ μμ–΄μ•Ό ν•λ‹¤. μλ°”μ κ²½μ° 1.5λ²„μ „λ¶€ν„° μ λ„¤λ¦­μ΄ λ„μ…λμ—κΈ° λ•λ¬Έμ— μ΄μ „ λ²„μ „κ³Ό νΈν™μ„±μ„ μ μ§€ν•κΈ° μ„ν•΄ νƒ€μ… μΈμκ°€ μ—†λ” μ λ„¤λ¦­ νƒ€μ…(raw νƒ€μ…)μ„ ν—μ©ν•λ‹¤. μλ¥Ό λ“¤μ–΄ μλ°”μ—μ„λ” λ¦¬μ¤νΈ μ›μ† νƒ€μ…μ„ μ§€μ •ν•μ§€ μ•κ³  List νƒ€μ…μ λ³€μλ¥Ό μ„ μ–Έν•  μ μλ‹¤. μ½”ν‹€λ¦°μ€ raw νƒ€μ…μ„ μ§€μ›ν•μ§€ μ•κ³  μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… μΈμ(μ§μ ‘ μ •μ νΉμ€ νƒ€μ… μ¶”λ΅ μ— μν•΄ μλ™ μ •μ)λ¥Ό ν•­μƒ μ •μν•΄μ•Ό ν•λ‹¤.

</aside>

## μ λ„¤λ¦­ ν•¨μμ™€ ν”„λ΅νΌν‹°

- λ¦¬μ¤νΈλ¥Ό λ‹¤λ£¨λ” ν•¨μλ¥Ό μ •μν•λ ¤ ν–μ„ λ• λ¨λ“  νƒ€μ…μ„ μ €μ¥ν•  μ μλ” μ λ„¤λ¦­ λ¦¬μ¤νΈλ¥Ό λ‹¤λ£¨λ” ν•¨μλ¥Ό μ›ν•  μ μλ‹¤.
- μ»¬λ ‰μ…μ„ λ‹¤λ£¨λ” λΌμ΄λΈλ¬λ¦¬μ ν•¨μλ” λ€λ¶€λ¶„ μ λ„¤λ¦­ ν•¨μλ‹¤.
    
    ```kotlin
    fun <T> List<T>.slice(indices: IntRange): List<T>
    ```
    
    - νƒ€μ… νλΌλ―Έν„°κ°€ μμ‹  κ°μ²΄μ™€ λ°ν™ νƒ€μ…μ— μ“°μΈλ‹¤.
- μ λ„¤λ¦­ κ³ μ°¨ ν•¨μ νΈμ¶ν•κΈ°

```kotlin
fun <T> List<T>.filter(predicate: (T) -> Boolean): List<T>

val authors = listOf("Dmitry", "Svetlana")
val readers = mutableListOf<String>(/*...*/)

readers.filter { it !in authors }
```

- λλ‹¤ νλΌλ―Έν„°μ—μ„ μλ™μΌλ΅ λ§λ“¤μ–΄μ§„ λ³€μ it νƒ€μ…μ€ TλΌλ” μ λ„¤λ¦­ νƒ€μ…μ΄λ‹¤.
- `filter`μ μμ‹  κ°μ²΄μΈ `reader`μ νƒ€μ…μ΄ `List<String>`μ΄λΌλ” μ‚¬μ‹¤μ„ μ•κ³  `T`κ°€ `String`μ΄λΌλ” μ‚¬μ‹¤μ„ μ¶”λ΅ ν•λ‹¤.
- μ λ„¤λ¦­ ν•¨μλ¥Ό μ •μν•  λ•μ™€ λ§μ°¬κ°€μ§€ λ°©λ²•μΌλ΅ μ λ„¤λ¦­ ν™•μ¥ ν”„λ΅νΌν‹°λ¥Ό μ„ μ–Έν•  μ μλ‹¤.
    
    ```kotlin
    // λ¨λ“  λ¦¬μ¤νΈ νƒ€μ…μ— μ΄ μ λ„¤λ¦­ ν™•μ¥ ν”„λ΅νΌν‹°λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.
    val <T> List<T>.penultimate: T
    	get() = this[size - 2]
    
    // Tλ” Intλ΅ μ¶”λ΅ λλ‹¤.
    println(listOf(1,2,3,4).penultimate) // 3
    ```
    

<aside>
π’΅ ν™•μ¥ ν”„λ΅νΌν‹°λ§ μ λ„¤λ¦­ν•κ² λ§λ“¤ μ μλ‹¤.
μΌλ° (ν™•μ¥μ΄ μ•„λ‹) ν”„λ΅νΌν‹°λ” νƒ€μ… νλΌλ―Έν„°λ¥Ό κ°€μ§ μ μ—†λ‹¤. ν΄λμ¤ ν”„λ΅νΌν‹°μ— μ—¬λ¬ νƒ€μ…μ κ°’μ„ μ €μ¥ν•  μ μ—†μΌλ―€λ΅ μ λ„¤λ¦­ν• μΌλ° ν”„λ΅νΌν‹°λ” λ§μ΄ λμ§€ μ•λ”λ‹¤. μΌλ° ν”„λ΅νΌν‹°λ¥Ό μ λ„¤λ¦­ν•κ² μ •μν•λ©΄ μ»΄νμΌλ¬κ°€ μ¤λ¥λ¥Ό λ°μƒμ‹ν‚¨λ‹¤.

</aside>

## μ λ„¤λ¦­ ν΄λμ¤ μ„ μ–Έ

- μ½”ν‹€λ¦°λ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„£μ€ κΊ½μ‡  κΈ°νΈ(<>)λ¥Ό ν΄λμ¤(λλ” μΈν„°νμ΄μ¤) μ΄λ¦„ λ’¤μ— λ¶™μ΄λ©΄ ν΄λμ¤(μΈν„°νμ΄μ¤)λ¥Ό μ λ„¤λ¦­ν•κ² λ§λ“¤ μ μλ‹¤.
- νƒ€μ… νλΌλ―Έν„°λ¥Ό μ΄λ¦„ λ’¤μ— λ¶™μ΄κ³  ν΄λμ¤ λ³Έλ¬Έ μ•μ—μ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ‹¤λ¥Έ μΌλ° νƒ€μ…μ²λΌ μ‚¬μ©ν•  μ μλ‹¤.

```kotlin
// List μΈν„°νμ΄μ¤μ— TλΌλ” νƒ€μ… νλΌλ―Έν„°λ¥Ό μ •μν•λ‹¤.
interface List<T> {
	// μΈν„°νμ΄μ¤ μ•μ—μ„ Tλ¥Ό μΌλ° νƒ€μ…μ²λΌ μ‚¬μ©ν•  μ μλ‹¤.
	operator fun get(index: Int): T
}
```

- μ λ„¤λ¦­ ν΄λμ¤λ¥Ό ν™•μ¥ν•λ” ν΄λμ¤(λλ” μ λ„¤λ¦­ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν΄λμ¤)λ¥Ό μ •μν•λ ¤λ©΄ κΈ°λ° νƒ€μ…μ μ λ„¤λ¦­ νλΌλ―Έν„°μ— λ€ν•΄ νƒ€μ… μΈμλ¥Ό μ§€μ •ν•΄μ•Ό ν•λ‹¤.
- μ΄λ• κµ¬μ²΄μ μΈ νƒ€μ…μ„ λ„κΈΈ μλ„ μκ³  (ν•μ„ ν΄λμ¤λ„ μ λ„¤λ¦­ ν΄λμ¤λΌλ©΄) νƒ€μ… νλΌλ―Έν„°λ΅ λ°›μ€ νƒ€μ…μ„ λ„κΈΈ μ μλ‹¤.

```kotlin
// μ΄ ν΄λμ¤λ” κµ¬μ²΄μ μΈ νƒ€μ… μΈμλ¥Ό Stringμ„ μ§€μ •ν•΄ Listλ¥Ό κµ¬ν„ν•λ‹¤.
class StringList: List<String> {
	// Stringμ„ μ–΄λ–»κ² μ‚¬μ©ν•λ”μ§€ μ‚΄ν΄λ³΄λΌ
	override fun get(index: Int): String = ...
}

// ArrayListμ μ λ„¤λ¦­ νƒ€μ… νλΌλ―Έν„° Tλ¥Ό Listμ νƒ€μ… μΈμλ΅ λ„κΈ΄λ‹¤.
class ArrayList<T>: List<T> {
	override fun get(index: Int): T = ...
}
```

## νƒ€μ… νλΌλ―Έν„° μ μ•½

- νƒ€μ… νλΌλ―Έν„° μ μ•½(type parameter constraint)μ€ ν΄λμ¤λ‚ ν•¨μμ— μ‚¬μ©ν•  μ μλ” νƒ€μ… μΈμλ¥Ό μ ν•ν•λ” κΈ°λ¥μ΄λ‹¤.
- μ–΄λ–¤ νƒ€μ…μ„ μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… νλΌλ―Έν„°μ— λ€ν• μƒν•(upper bound)λ΅ μ§€μ •ν•λ©΄ κ·Έ μ λ„¤λ¦­ νƒ€μ…μ„ μΈμ¤ν„΄μ¤ν™”ν•  λ• μ‚¬μ©ν•λ” νƒ€μ… μΈμλ” λ°λ“μ‹ κ·Έ μƒν• νƒ€μ…μ΄κ±°λ‚ κ·Έ μƒν• νƒ€μ…μ ν•μ„ νƒ€μ…μ΄μ–΄μ•Ό ν•λ‹¤.
- μ μ•½μ„ κ°€ν•λ ¤λ©΄ νƒ€μ… νλΌλ―Έν„° μ΄λ¦„ λ’¤μ— μ½λ΅ (:)μ„ ν‘μ‹ν•κ³  κ·Έ λ’¤μ— μƒν• νƒ€μ…μ„ μ μΌλ©΄ λλ‹¤.

```java
<T extends Number> T sum <List<T> list)

```

![νƒ€μ… νλΌλ―Έν„° λ’¤μ— μƒν•μ„ μ§€μ •ν•¨μΌλ΅μ¨ μ μ•½μ„ μ •μν•  μ μλ‹¤.](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/312a8003-632a-4f03-893a-9b848e197b68/Untitled.png)

νƒ€μ… νλΌλ―Έν„° λ’¤μ— μƒν•μ„ μ§€μ •ν•¨μΌλ΅μ¨ μ μ•½μ„ μ •μν•  μ μλ‹¤.

- νƒ€μ… νλΌλ―Έν„° Tμ— λ€ν• μƒν•μ„ μ •ν•κ³  λ‚λ©΄ T νƒ€μ…μ κ°’μ„ κ·Έ μƒν• νƒ€μ…μ κ°’μΌλ΅ μ·¨κΈ‰ν•  μ μλ‹¤.

```kotlin
// Numberλ¥Ό νƒ€μ… νλΌλ―Έν„° μƒν•μΌλ΅ μ •ν•λ‹¤.
fun <T : Number> oneHalf(value: T): Double {
	// Number ν΄λμ¤μ— μ •μλ λ©”μ„λ“λ¥Ό νΈμ¶ν•λ‹¤.
	return value.toDouble() / 2.0
}
```

```kotlin
// μ΄ ν•¨μμ μΈμλ“¤μ€ λΉ„κµ κ°€λ¥ν•΄μ•Ό ν•λ‹¤.
fun <T: Comparable<T>> max(first: T, second: T): T {
	return if (first > second) first else second
}

// λ¬Έμμ—΄μ€ μ•νλ²³μμΌλ΅ λΉ„κµλλ‹¤.
println(max("kotlin", "java")
```

- `T`μ μƒν• νƒ€μ…μ€ `Comparable<T>`λ‹¤.
- νƒ€μ… νλΌλ―Έν„°μ— λ€ν•΄ λ‘ μ΄μƒμ μ μ•½μ„ κ°€ν•΄μ•Ό ν•λ” κ²½μ°

```kotlin
fun <T> ensureTrailingPeriod(seq: T) 
	// νƒ€μ… νλΌλ―Έν„° μ μ•½ λ©λ΅μ΄λ‹¤.
	where T : CharSequence, T: Appendable {
		// CharSequence μΈν„°νμ΄μ¤μ ν™•μ¥ ν•¨μλ¥Ό νΈμ¶ν•λ‹¤.
		if(!seq.endsWith('.')) {
			// Appendable μΈν„°νμ΄μ¤μ λ©”μ„λ“λ¥Ό νΈμ¶ν•λ‹¤.
			seq.append('.')
		}
	}
}
```

- μ„μ μ½”λ“λ” νƒ€μ… μΈμκ°€ CharSequenceμ™€ Appendable μΈν„°νμ΄μ¤λ¥Ό λ°λ“μ‹ κµ¬ν„ν•΄μ•Όν•λ‹¤λ” μ‚¬μ‹¤μ„ ν‘ν„ν•΄μ•Ό ν•λ‹¤.
- λ°μ΄ν„°μ— μ ‘κ·Όν•λ” μ—°μ‚°(endsWith)κ³Ό λ°μ΄ν„°λ¥Ό λ³€ν™ν•λ” μ—°μ‚°(append)μ„ T νƒ€μ…μ κ°’μ—κ² μν–‰ν•  μ μλ‹¤λ” λ»μ΄λ‹¤.

## νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„μ΄ λ  μ μ—†λ” νƒ€μ…μΌλ΅ ν•μ •

- μ λ„¤λ¦­ ν΄λμ¤λ‚ ν•¨μλ¥Ό μ •μν•κ³  κ·Έ νƒ€μ…μ„ μΈμ¤ν„΄μ¤ν™”ν•  λ•λ” λ„μ΄ λ  μ μλ” νƒ€μ…μ„ ν¬ν•¨ν•λ” μ–΄λ–¤ νƒ€μ…μΌλ΅ νƒ€μ…μΈμλ¥Ό μ§€μ •ν•΄λ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό μΉν™ν•  μ μλ‹¤.
- μ•„λ¬΄λ° μƒν•μ„ μ •ν•μ§€ μ•μ€ νƒ€μ… νλΌλ―Έν„°λ” κ²°κ³Όμ μΌλ΅ Any?λ¥Ό μƒν•μΌλ΅ μ •ν• νλΌλ―Έν„°μ™€ κ°™λ‹¤.

```kotlin
class Processor<T> {
	fun process(value: T) {
		// valueλ” λ„μ΄ λ  μ μλ‹¤. λ‹¤λΌμ„ μ•μ „ν• νΈμ¶μ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.
		value?.hashCode()
	}
}
```

- process ν•¨μμ—μ„ value νλΌλ―Έν„°μ νƒ€μ… Tμ—λ” λ¬Όμν‘(?)κ°€ λ¶™μ–΄μμ§€ μ•μ§€λ§ μ‹¤μ λ΅λ” Tμ— ν•΄λ‹Ήν•λ” νƒ€μ… μΈμλ΅ λ„μ΄ λ  μ μλ” νƒ€μ…μ„ λ„κΈΈ μλ„ μλ‹¤. Tλ” Any?λ¥Ό μƒν•μΌλ΅ μ‚¬μ©ν•κ³  μλ” κ²ƒκ³Ό λ‹¤λ¥΄μ§€ μ•κΈ° λ•λ¬Έμ΄λ‹¤.

```kotlin
// λ„μ΄ λ  μ μλ” νƒ€μ…μΈ String?μ΄ Tλ¥Ό λ€μ‹ ν•λ‹¤.
val nullableStringProcessor = Processor<String?>()
// μ΄ μ½”λ“λ” μ μ»΄νμΌλλ©° 'null'μ΄ 'value' μΈμλ΅ μ§€μ •λλ‹¤.
nullableStringProcessor.process(null)
```

- ν•­μƒ λ„μ΄ λ  μ μ—†λ” νƒ€μ…λ§ νƒ€μ… μΈμλ΅ λ°›κ² λ§λ“¤λ ¤λ©΄ νƒ€μ… νλΌλ―Έν„°μ— μ μ•½μ„ κ°€ν•΄μ•Ό ν•λ‹¤.
- λ„ κ°€λ¥μ„±μ„ μ μ™Έν• μ•„λ¬΄λ° μ μ•½λ„ ν•„μ” μ—†λ‹¤λ©΄ Any? λ€μ‹  Anyλ¥Ό μƒν•μΌλ΅ μ‚¬μ©ν•λ‹¤.

```kotlin
// nullμ΄ λ  μ μ—†λ” νƒ€μ… μƒν•μ„ μ§€μ •ν•λ‹¤.
class Processor<T : Any> {
	fun process(value: T) {
		// T νƒ€μ…μ valueλ” nullμ΄ λ  μ μ—†λ‹¤.
		value.hashCode()
	}
}
```

- `<T: Any>`λΌλ” μ μ•½μ€ T νƒ€μ…μ΄ ν•­μƒ λ„μ΄ λ  μ μ—†λ” νƒ€μ…μ΄ λκ² λ³΄μ¥ν•λ‹¤.
- μ»΄νμΌλ¬λ” νƒ€μ… μΈμμΈ `String?`κ°€ `Any` μμ† νƒ€μ…μ΄ μ•„λ‹λ―€λ΅ `Processor<String?>` κ°™μ€ μ½”λ“λ¥Ό κ±°λ¶€ν•λ‹¤.

```kotlin
val nullableStringProcessor = Processor<String?>()
// Error: Type argument is not within its bounds: should be subtype of 'Any'
```

- νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„μ΄ λ  μ μ—†λ” νƒ€μ…μΌλ΅ μ μ•½ν•κΈ°λ§ ν•λ©΄ νƒ€μ… μΈμλ΅ λ„μ΄ λ  μ μλ” νƒ€μ…μ΄ λ“¤μ–΄μ¤λ” μΌμ„ λ§‰μ„ μ μλ‹¤. λ”°λΌμ„ Anyκ°€ μ•„λ‹ λ‹¤λ¥Έ νƒ€μ…μΌλ΅ non-null νƒ€μ…μ„ μ‚¬μ©ν•΄ μƒν•μ„ μ •ν•΄λ„ λλ‹¤.

# 2. μ‹¤ν–‰ μ‹ μ λ„¤λ¦­μ¤μ λ™μ‘: μ†κ±°λ νƒ€μ… νλΌλ―Έν„°μ™€ μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°

---

- JVMμ μ λ„¤λ¦­μ¤λ” λ³΄ν†µ νƒ€μ… μ†κ±°(type erasure)λ¥Ό μ‚¬μ©ν•΄ κµ¬ν„λλ‹¤.
    - μ‹¤ν–‰ μ‹μ μ— μ λ„¤λ¦­ ν΄λμ¤μ μΈμ¤ν„΄μ¤μ— νƒ€μ… μΈμ μ •λ³΄κ°€ λ“¤μ–΄μμ§€ μ•λ‹¤λ” λ»μ΄λ‹¤.
- ν•¨μλ¥Ό inlineμΌλ΅ μ„ μ–Έν•¨μΌλ΅μ¨ μ΄λ° μ μ•½μ„ μ–΄λ–»κ² μ°νν•  μ μλ”μ§€ μ‚΄ν΄λ³Έλ‹¤.
- ν•¨μλ¥Ό inlineμΌλ΅ λ§λ“¤λ©΄ νƒ€μ… μΈμκ°€ μ§€μ›μ§€μ§€ μ•κ² ν•  μ μλ‹¤. μ½”ν‹€λ¦°μ—μ„λ” μ΄λ¥Ό μ‹¤μ²΄ν™”(reify)λΌκ³  ν•λ‹¤.

## μ‹¤ν–‰ μ‹μ μ μ λ„¤λ¦­: νƒ€μ… κ²€μ‚¬μ™€ μΊμ¤νΈ

- μ½”ν‹€λ¦°μ€ μλ°”μ™€ λ§μ°¬κ°€μ§€λ΅ λ°νƒ€μ„μ— μ λ„¤λ¦­ νƒ€μ… μΈμ μ •λ³΄κ°€ μ§€μ›μ§„λ‹¤.
    - μ λ„¤λ¦­ ν΄λμ¤ μΈμ¤ν„΄μ¤κ°€ κ·Έ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•  λ• μ“°μΈ νƒ€μ… μΈμμ— λ€ν• μ •λ³΄λ¥Ό μ μ§€ν•μ§€ μ•λ”λ‹¤.

```kotlin
val list1: List<String> = listOf("a", "b")
val list2: List<Int> = listOf(1, 2, 3)
```

- μ‹¤ν–‰μ‹μ μ— list1μ΄λ‚ list2κ°€ λ¬Έμμ—΄μ΄λ‚ μ •μμ λ¦¬μ¤νΈλ΅ μ„ μ–Έλλ‹¤λ” μ‚¬μ‹¤μ„ μ• μ μ—†λ‹¤. κ° κ°μ²΄λ” λ‹¨μ§€ ListμΌ λΏμ΄λ‹¤.
- μ»΄νμΌλ¬λ” λ‘μ„ μ„λ΅ λ‹¤λ¥Έ νƒ€μ…μΌλ΅ μΈμ‹ν•μ§€λ§ μ‹¤ν–‰ μ‹μ μ— κ·Έ λ‘μ€ μ™„μ „ν κ°™μ€ νƒ€μ…μ κ°μ²΄λ‹¤.
- μ»΄νμΌλ¬λ” νƒ€μ… μΈμλ¥Ό μ•κ³  μ¬λ°”λ¥Έ νƒ€μ…μ κ°’λ§ κ° λ¦¬μ¤νΈμ— λ„£λ„λ΅ λ³΄μ¥ν•λ‹¤. μλ°” raw νƒ€μ…μ„ μ‚¬μ©ν•΄ λ¦¬μ¤νΈμ— μ ‘κ·Όν•κ³  νƒ€μ… μΊμ¤νΈλ¥Ό ν™μ©ν•λ©΄ μ»΄νμΌλ¬λ¥Ό μ†μΌ μλ” μμ§€λ§ ν’μ΄ λ§μ΄ λ“ λ‹¤.

νƒ€μ… μ†κ±°λ΅ μΈν•΄ μƒκΈ°λ” ν•κ³„

- νƒ€μ… μΈμλ¥Ό λ”°λ΅ μ €μ¥ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ‹¤ν–‰μ‹μ μ— νƒ€μ… μΈμλ¥Ό κ²€μ‚¬ν•  μ μ—†λ‹¤.

```kotlin
if (value is List<String>) ( ... )
// Error: Cannot check for instance of srased type
```

- μ‹¤ν–‰ μ‹μ μ— μ–΄λ–¤ κ°’μ΄ ListμΈμ§€ μ—¬λ¶€μΈμ§€ μ• μ μμ§€λ§ κ·Έ λ¦¬μ¤νΈκ°€ μ–΄λ νƒ€μ…μ elementλ¥Ό κ°–κ³  μλ”μ§€ μ• μ μ—†λ‹¤. κ·Έ μ •λ³΄λ” μ§€μ›μ§„λ‹¤.
    - λ‹¤λ§ μ €μ¥ν•΄μ•Ό ν•λ” νƒ€μ… μ •λ³΄μ ν¬κΈ°κ°€ μ¤„μ–΄λ“¤μ–΄μ„ μ „λ°μ μΈ λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ΄ μ¤„μ–΄λ“ λ‹¤λ” μ¥μ μ΄ μλ‹¤.
- μ½”ν‹€λ¦°μ—μ„ νƒ€μ… μΈμλ¥Ό λ…μ‹ν•μ§€ μ•κ³  μ λ„¤λ¦­ νƒ€μ…μ„ μ‚¬μ©ν•  μ μ—†λ‹¤. μ–΄λ–¤ κ°’μ΄ μ§‘ν•©μ΄λ‚ λ§µμ΄ μ•„λ‹λΌ λ¦¬μ¤νΈλΌλ” μ‚¬μ‹¤μ„ μ–΄λ–»κ² ν™•μΈν• κΉ? **μ¤νƒ€ ν”„λ΅μ μ…(star projection)**μ„ μ‚¬μ©ν•λ©΄ λλ‹¤.

```kotlin
if (value is List<*>) { ... }
```

- νƒ€μ… νλΌλ―Έν„°κ°€ 2κ° μ΄μƒμ΄λΌλ©΄ λ¨λ“  νƒ€μ… νλΌλ―Έν„°μ— *λ¥Ό ν¬ν•¨μ‹μΌμ•Ό ν•λ‹¤.
- μΈμλ¥Ό μ• μ μ—†λ” μ λ„¤λ¦­ νƒ€μ…μ„ ν‘ν„ν•  λ•(μλ°”μ List<?>μ™€ λΉ„μ·ν•λ‹¤) μ¤νƒ€ ν”„λ΅μ μ…μ„ μ“΄λ‹¤.
- `as`λ‚ `as?` μΊμ¤ν…μ—λ„ μ—¬μ „ν μ λ„¤λ¦­ νƒ€μ…μ„ μ‚¬μ©ν•  μ μλ‹¤. κΈ°μ € ν΄λμ¤λ” κ°™μ§€λ§ νƒ€μ… μΈμκ°€ λ‹¤λ¥Έ νƒ€μ…μΌλ΅ μΊμ¤ν…ν•΄λ„ μ—¬μ „ν μΊμ¤ν…μ— μ„±κ³µν•λ‹¤. μ‹¤ν–‰ μ‹μ μ—λ” μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… μΈμλ¥Ό μ• μ μ—†μΌλ―€λ΅ μΊμ¤ν…μ€ ν•­μƒ μ„±κ³µ ν•λ‹¤. (μ»΄νμΌλ¬κ°€ uncheckd cast(κ²€μ‚¬ν•  μ μ—†λ” μΊμ¤ν…)μ΄λΌκ³  κ²½κ³ λ¥Ό μ¤€λ‹¤.)

```kotlin
fun printSum(c: Collection<*>) {
	// μ—¬κΈ°μ„ Unchecked cast: List<*> to List<Int> κ²½κ³  λ°μƒ
	val intList = c as? List<Int>
		?: throw IllegalArgumentException("List is expected")
	println(intList.sum())
}
```

- μ»΄νμΌλ¬κ°€ μΊμ¤ν… κ΄€λ ¨ κ²½κ³ λ¥Ό ν•λ‹¤λ” μ μ„ μ μ™Έν•λ©΄ λ¨λ“  μ½”λ“κ°€ λ¬Έμ μ—†μ΄ μ»΄νμΌλλ‹¤.
- μ½”ν‹€λ¦° μ»΄νμΌλ¬λ” μ»΄νμΌ μ‹μ μ— νƒ€μ… μ •λ³΄κ°€ μ£Όμ–΄μ§„ κ²½μ°μ—λ” `is` κ²€μ‚¬λ¥Ό μν–‰ν•κ² ν—μ©ν•  μ μμ„ μ •λ„λ΅ λ‘λ‘ν•λ‹¤.

```kotlin
fun printSum(c: Collection<Int>) {
	// μ΄ κ²€μ‚¬λ” μ¬λ°”λ¥΄λ‹¤.
	if (c is List<Int>) {
		println(c.sum())
	}
}
```

- μ½”ν‹€λ¦°μ€ μ λ„¤λ¦­ ν•¨μμ λ³Έλ¬Έμ—μ„ κ·Έ ν•¨μμ νƒ€μ… μΈμλ¥Ό κ°€λ¦¬ν‚¬ μ μλ” νΉλ³„ν• κΈ°λ¥μ„ μ κ³µν•μ§€ μ•λ”λ‹¤.
- inline ν•¨μ μ•μ—μ„λ” νƒ€μ…μΈμλ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

## μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν• ν•¨μ μ„ μ–Έ

- μ λ„¤λ¦­ ν΄λμ¤μ μΈμ¤ν„΄μ¤κ°€ μμ–΄λ„ κ·Έ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤ λ• μ‚¬μ©ν• νƒ€μ… μΈμλ¥Ό μ•μ•„λ‚Ό μ μ—†λ‹¤. μ λ„¤λ¦­ ν•¨μμ νƒ€μ… μΈμλ„ λ§μ°¬κ°€μ§€λ‹¤. μ λ„¤λ¦­ ν•¨μκ°€ νΈμ¶λλ„ κ·Έ ν•¨μμ λ³Έλ¬Έμ—μ„λ” νΈμ¶ μ‹ μ“°μΈ νƒ€μ… μΈμλ¥Ό μ• μ μ—†λ‹¤.

```kotlin
fun <T> isA(value: Any) = value is T
// Error: Cannot check for instance of erased type: T
```

- μΈλΌμΈ ν•¨μμ νƒ€μ… νλΌλ―Έν„°λ” μ‹¤μ²΄ν™”λλ―€λ΅ μ‹¤ν–‰ μ‹μ μ— μΈλΌμΈ ν•¨μμ νƒ€μ… μΈμλ¥Ό μ• μ μλ‹¤.
    - `inline` ν‚¤μ›λ“λ¥Ό λ¶™μ΄λ©΄ μ»΄νμΌλ¬λ” κ·Έ ν•¨μλ¥Ό νΈμ¶ν• μ‹μ„ λ¨λ‘ ν•¨μ λ³Έλ¬ΈμΌλ΅ λ°”κΎΌλ‹¤.
- ν•¨μκ°€ λλ‹¤λ¥Ό μΈμλ΅ μ‚¬μ©ν•λ” κ²½μ° κ·Έ ν•¨μλ¥Ό μΈλΌμΈ ν•¨μλ΅ λ§λ“¤λ©΄ μ½”λ“λ΅ ν•¨κ» μΈλΌμ΄λ‹λκ³  κ·Έμ— λ”°λΌ λ¬΄λ… ν΄λμ¤μ™€ κ°μ²΄κ°€ μƒμ„±λμ§€ μ•μ•„μ„ μ„±λ¥μ΄ λ” μΆ‹μ•„μ§ μ μλ‹¤.

```kotlin
// μ΄μ λ” μ΄ μ½”λ“κ°€ μ»΄νμΌ λλ‹¤.
inline fun <reified T> isA(value: Any) = value is T
println(isA<String>("abc")
// true
println(isA<String>(123))
// fale
```

- μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό ν™μ©ν•λ” κ°€μ¥ κ°„λ‹¨ν• μμ λ” ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬ ν•¨μμΈ filetIsInstanceλ‹¤. μ΄ ν•¨μλ” μΈμλ΅ λ°›μ€ μ»¬λ ‰μ…μ μ›μ† μ¤‘μ—μ„ νƒ€μ… μΈμλ΅ μ§€μ •ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ§μ„ λ¨μ•„μ„ λ§λ“  λ¦¬μ¤νΈλ¥Ό λ°ν™ν•λ‹¤.

```kotlin
val items = listOf("one", 2, "three")
println(items.filterIsInstance<String>())
// [one, three]
```

- filterIsInstanceλ” κ·Έ νƒ€μ… μΈμλ¥Ό μ‚¬μ©ν•΄ λ¦¬μ¤νΈμ μ›μ† μ¤‘μ— νƒ€μ… μΈμμ™€ νƒ€μ…μ΄ μΌμΉν•λ” μ›μ†λ§μ„ μ¶”λ ¤λ‚Ό μ μλ‹¤.

```kotlin
// reified ν‚¤μ›λ“λ” μ΄ νƒ€μ… νλΌλ―Έν„°κ°€ μ‹¤ν–‰ μ‹μ μ— μ§€μ›μ§€μ§€ μ•μμ„ ν‘μ‹ν•λ‹¤.
inline fun <reified T> Iterable<*>.filterIsInstance(): List<T> {
	val destination = mutableListOf<T>()
	for (element in this) {
		// κ° μ›μ†κ°€ νƒ•λΉ„ μΈμλ΅ μ§€μ •ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤μΈμ§€ κ²€μ‚¬ν•  μ μλ‹¤.
		if (element in this) {
			destination.add(element)
		}
	}
	return destination
}
```

### μΈλΌμΈ ν•¨μμ—μ„λ§ μ‹¤μ²΄ν™”λ νƒ€μ… μΈμλ¥Ό μ“Έ μ μλ” μ΄μ 

- μ»΄νμΌλ¬λ” μΈλΌμΈ ν•¨μμ λ³Έλ¬Έμ„ κµ¬ν„ν• λ°”μ΄νΈμ½”λ“λ¥Ό ν•¨μκ°€ νΈμ¶λλ” λ¨λ“  μ§€μ μ— μ‚½μ…ν•λ‹¤.
- μ»΄νμΌλ¬λ” μ‹¤μ²΄ν™”λ νƒ€μ… μΈμλ¥Ό μ‚¬μ©ν•΄ μΈλΌμΈ ν•¨μλ¥Ό νΈμ¶ν•λ” κ° λ¶€λ¶„μ μ •ν™•ν• νƒ€μ…μΈμλ¥Ό μ• μ μλ‹¤.
- μ»΄νμΌλ¬λ” νƒ€μ… μΈμλ΅ μ“°μΈ κµ¬μ²΄μ μΈ ν΄λμ¤λ¥Ό μ°Έμ΅°ν•λ” λ°”μ΄νΈμ½”λ“λ¥Ό μƒμ„±ν•΄ μ‚½μ…ν•  μ μλ‹¤.

```kotlin
for (element in this) {
	// νΉμ • ν΄λμ¤ μ°Έμ΅°
	if (element is String) {
		destination.add(element)
	}
}
```

- νƒ€μ… νλΌλ―Έν„°κ°€ μ•„λ‹λΌ κµ¬μ²΄μ μΈ νƒ€μ…μ„ μ‚¬μ©ν•λ―€λ΅ λ°”μ΄νΈμ½”λ“λ” μ‹¤ν–‰ μ‹μ μ— λ²μ–΄μ§€λ” νƒ€μ… μ†κ±°μ μν–¥μ„ λ°›μ§€ μ•λ”λ‹¤.
- μλ°” μ½”λ“μ—μ„λ” reified νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” inline ν•¨μλ¥Ό νΈμ¶ν•  μ μ—†λ‹¤.
- μλ°”μ—μ„λ” μ½”ν‹€λ¦° μΈλΌμΈ ν•¨μλ¥Ό λ‹¤λ¥Έ λ³΄ν†µ ν•¨μμ²λΌ νΈμ¶ν•λ‹¤. κ·Έλ° κ²½μ° μΈλΌμΈ ν•¨μλ¥Ό νΈμ¶ν•΄λ„ μ‹¤μ  μΈλΌμ΄λ‹μ΄ λμ§€ μ•λ”λ‹¤. μ‹¤μ²΄ν™”ν™ νƒ€μ… νλΌλ―Έν„°κ°€ μλ” ν•¨μμ κ²½μ° νƒ€μ… μΈμ κ°’μ„ λ°”μ΄νΈμ½”λ“μ— λ„£κΈ° μ„ν•΄ μΌλ° ν•¨μλ³΄λ‹¤ λ” λ§μ€ μ‘μ—…μ΄ ν•„μ”ν•λ‹¤. λ”°λΌμ„ μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°κ°€ μλ” μΈλΌμ΄λ‹ ν•¨μλ¥Ό μΌλ° ν•¨μμ²λΌ μλ°”μ—μ„ νΈμ¶ν•  μ μ—†λ‹¤.

<aside>
π’΅ ν•¨μμ νλΌλ―Έν„° μ¤‘μ— ν•¨μ νƒ€μ…μΈ νλΌλ―Έν„°κ°€ μκ³  κ·Έ νλΌλ―Έν„°μ— ν•΄λ‹Ήν•λ” μΈμ(λλ‹¤)λ¥Ό ν•¨κ» μΈλΌμ΄λ‹ν•¨μΌλ΅μ¨ μ–»λ” μ΄μµμ΄ λ” ν° κ²½μ°μ—λ§ ν•¨μλ¥Ό μΈλΌμΈ ν•¨μλ¥Ό λ§λ“¤μ–΄μ•Ό ν•λ‹¤. ν•μ§€λ§ μ΄ κ²½μ°μ—λ” ν•¨μλ¥Ό inlineμΌλ΅ λ§λ“λ” μ΄μ κ°€ μ„±λ¥ ν–¥μƒμ΄ μ•„λ‹λΌ μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•κΈ° μ„ν•¨μ΄λ‹¤. μ„±λ¥μ„ μΆ‹κ² ν•λ ¤λ©΄ μΈλΌμΈ ν•¨μμ ν¬κΈ°λ¥Ό κ³„μ† κ΄€μ°°ν•΄μ•Ό ν•λ‹¤.

</aside>

## μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ΅ ν΄λμ¤ μ°Έμ΅° λ€μ‹ 

- `java.class.Class` νƒ€μ… μΈμλ¥Ό νλΌλ―Έν„°λ΅ λ°›λ” APIμ— λ€ν• μ½”ν‹€λ¦° μ–΄λ‘ν„°(adpater)λ¥Ό κµ¬μ¶•ν•λ” κ²½μ° μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μμ£Ό μ‚¬μ©ν•λ‹¤.
    - `java.class.Class` APIμ μλ΅ JDKμ `ServiceLoader`κ°€ μλ‹¤. μ¶”μƒν΄λμ¤λ‚ μΈν„°νμ΄μ¤λ¥Ό ν‘ν„ν•λ” `java.class.Class` λ¥Ό λ°›μ•„μ„ κ·Έ ν΄λμ¤λ‚ μΈμ¤ν„΄μ¤λ¥Ό κµ¬ν„ν• μΈμ¤ν„΄μ¤λ¥Ό λ°ν™ν•λ‹¤.

```kotlin
val serviceImpl = ServiceLoader.load(Service::class.java)
```

- μ΄ κ²½μ° μ½”ν‹€λ¦° ν΄λμ¤μ— λ€μ‘ν•λ” java.lang.Class μ°Έμ΅°λ¥Ό μ–»λ” λ°©λ²•μ΄λ‹¤.

```kotlin
val serviceImpl = loadService<Service>()
```

- κµ¬μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ©΄ μ„μ™€ κ°™μ΄λ‚νƒ€λ‚λ‹¤.

```kotlin
// νƒ€μ… νλΌλ―Έν„°λ¥Ό reifiedλ΅ ν‘μ‹ν•λ‹¤.
inline fun <reified T> loadService() {
	// T::classλ΅ νƒ€μ… νλΌλ―Έν„°μ ν΄λμ¤λ¥Ό κ°€μ Έμ¨λ‹¤.
	return ServiceLoader.load(T::class.java)
}
```

- νƒ€μ… νλΌλ―Έν„°λ΅ μ§€μ •λ ν΄λμ¤μ— λ”°λ¥Έ `java.lang.Class`λ¥Ό μ–»μ„ μ μκ³  κ·Έλ ‡κ² μ–»μ€ ν΄λμ¤ μ°Έμ΅°λ¥Ό λ³΄ν†µλ•μ™€ λ§μ°¬κ°€μ§€λ΅ μ‚¬μ©ν•  μ μλ‹¤.

## μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°μ μ μ•½

- μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ” μ μ©ν• λ„κµ¬μ§€λ§ λ‡ κ°€μ§€ μ μ•½μ΄ μλ‹¤.

λ‹¤μκ³Ό κ°™μ€ κ²½μ°μ— μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

- νƒ€μ… κ²€μ‚¬μ™€ μΊμ¤ν…(is, !is, as, as?)
- μ½”ν‹€λ¦­ λ¦¬ν”λ ‰μ… API(::class)
- μ½”ν‹€λ¦° νƒ€μ…μ— λ€μ‘ν•λ” java.lang.Classλ¥Ό μ–»κΈ°(::class.java)
- λ‹¤λ¥Έ ν•¨μλ¥Ό νΈμ¶ν•  λ• νƒ€μ… μΈμλ΅ μ‚¬μ©

λ‹¤μκ³Ό κ°™μ€ μΌμ„ ν•  μ μ—†λ‹¤.

- νƒ€μ… νλΌλ―Έν„° ν΄λμ¤μ μΈμ¤ν„΄μ¤ μƒμ„±ν•κΈ°
- νƒ€μ… νλΌλ―Έν„° ν΄λμ¤μ λ™λ° κ°μ²΄ λ©”μ„λ“ νΈμ¶ν•κΈ°
- μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ”κµ¬ν•λ” ν•¨μλ¥Ό νΈμ¶ν•λ©΄μ„ μ‹¤μ²΄ν™”ν•μ§€ μ•μ€ νƒ€μ… νλΌλ―Έν„°λ΅ λ°›μ€ νƒ€μ…μ„ νƒ€μ… μΈμλ΅ λ„κΈ°κΈ°
- ν΄λμ¤, ν”„λ΅νΌν‹°, μΈλΌμΈ ν•¨μκ°€ μ•„λ‹ ν•¨μμ νƒ€μ… νλΌλ―Έν„°λ¥Ό reifiedλ΅ μ§€μ •ν•κΈ°

μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μΈλΌμΈ ν•¨μμ—λ§ μ‚¬μ©ν•  μ μμΌλ―€λ΅ μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” ν•¨μλ” μμ‹ μ—κ² μ „λ‹¬λλ” λ¨λ“  λλ‹¤μ™€ ν•¨κ» μΈλΌμ΄λ‹λλ‹¤. λλ‹¤ λ‚΄λ¶€μ—μ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” λ°©μ‹μ— λ”°λΌ λλ‹¤λ¥Ό μΈλΌμ΄λ‹ν•  μ μ—†λ” κ²½μ°κ°€ μƒκΈ°κΈ°λ„ ν•κ³  μ„±λ¥ λ¬Έμ λ΅ λλ‹¤λ¥Ό μΈλΌμ΄λ‹μ•ν•κ³  μ‹¶μ„ μ μλ‹¤.

# 3. λ³€μ„±: μ λ„¤λ¦­κ³Ό ν•μ„ νƒ€μ…

---

**λ³€μ„±(variance)** κ°λ…μ€ `List<String>`μ™€ `List<Any>`μ™€ κ°™μ΄ κΈ°μ € νƒ€μ…μ΄ κ°™κ³  νƒ€μ… μΈμκ°€ λ‹¤λ¥Έ μ—¬λ¬ νƒ€μ…μ΄ μ„λ΅ μ–΄λ–¤ κ΄€κ³„κ°€ μλ”μ§€ μ„¤λ…ν•λ” κ°λ…μ΄λ‹¤.

## λ³€μ„±μ΄ μλ” μ΄μ : μΈμλ¥Ό ν•¨μμ— λ„κΈ°κΈ°

- List<Any> νƒ€μ…μ νλΌλ―Έν„°λ¥Ό λ°›λ” ν•¨μμ— List<String>μ„ λ„κΈ°λ©΄ μ•μ „ν• κΉ?

```kotlin
fun printContens(list: List<Any>) {
	println(list.joinToString())
}
```

- κ° μ›μ†λ¥Ό `Any`λ΅ μ·¨κΈ‰ν•λ©° λ¨λ“  λ¬Έμμ—΄μ€ `Any` νƒ€μ…μ΄κΈ°λ„ ν•λ―€λ΅ μ™„μ „ν μ•μ „ν•λ‹¤.

```kotlin
fun addAnswer(list: MutableList<Any>) {
	list.add(42)
}
```

```kotlin
val strings = mutableListOf("abc", "bac")
// μ΄ μ¤„μ΄ μ»΄νμΌλλ‹¤λ©΄
addAnswer(strings)
println(strings.maxBy { it.length })
// μ‹¤ν–‰ μ‹μ μ— μμ™Έκ°€ λ°μƒν•  κ²ƒμ΄λ‹¤.
ClassCastException: Integer cannot be cast toString
```

- μ½”ν‹€λ¦° μ»΄νμΌλ¬λ” μ΄λ° ν•¨μ νΈμ¶μ„ κΈμ§€ν•λ‹¤.

- μ½”ν‹€λ¦°μ—μ„λ” λ¦¬μ¤νΈμ λ³€κ²½ κ°€λ¥μ„±μ— λ”°λΌ μ μ ν• μΈν„°νμ΄μ¤λ¥Ό μ„ νƒν•λ©΄ μ•μ „ν•μ§€ λ»ν• ν•¨μ νΈμ¶μ„ λ§‰μ„ μ μλ‹¤.
- ν•¨μκ°€ μ½κΈ° μ „μ© λ¦¬μ¤νΈλ¥Ό λ°›λ”λ‹¤λ©΄ λ” κµ¬μ²΄μ μΈ νƒ€μ…μ μ›μ†λ¥Ό κ°–λ” λ¦¬μ¤νΈλ¥Ό κ·Έ ν•¨μμ— λ„κΈΈ μ μλ‹¤.
